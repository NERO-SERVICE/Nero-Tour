<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ğŸ§ª API í‚¤ ê²€ì¦ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { 
            font-family: 'Courier New', monospace; 
            padding: 20px; 
            background: #1e1e1e; 
            color: #fff; 
            line-height: 1.6; 
        }
        .result { 
            margin: 10px 0; 
            padding: 10px; 
            border-radius: 5px; 
            border-left: 4px solid #00bcd4;
            background: #2a2a2a;
        }
        .success { border-left-color: #4caf50; background: #1b4332; }
        .error { border-left-color: #f44336; background: #4a1e1e; }
        .step { margin: 20px 0; }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #5a6fd8; }
        #mapTest { width: 100%; height: 300px; border: 2px solid #333; margin: 20px 0; }
        pre { background: #333; padding: 10px; border-radius: 5px; overflow-x: auto; }
    </style>
    <script src="config.js"></script>
</head>
<body>
    <h1>ğŸ” Google Maps API í‚¤ ê²€ì¦ ë° ì§€ë„ í…ŒìŠ¤íŠ¸</h1>
    
    <div class="step">
        <h2>1ë‹¨ê³„: API í‚¤ ê²€ì¦</h2>
        <button onclick="testValidation()">ğŸ§ª ê²€ì¦ ì‹¤í–‰</button>
        <div id="validationResults"></div>
    </div>
    
    <div class="step">
        <h2>2ë‹¨ê³„: Google Maps API ë¡œë“œ</h2>
        <button onclick="loadGoogleMaps()">ğŸ“¥ API ë¡œë“œ</button>
        <div id="loadResults"></div>
    </div>
    
    <div class="step">
        <h2>3ë‹¨ê³„: ì§€ë„ ìƒì„± í…ŒìŠ¤íŠ¸</h2>
        <button onclick="createMap()">ğŸ—ºï¸ ì§€ë„ ìƒì„±</button>
        <div id="mapTest"></div>
        <div id="mapResults"></div>
    </div>

    <script>
        let apiLoaded = false;
        
        function addResult(containerId, message, isSuccess = true) {
            const container = document.getElementById(containerId);
            const div = document.createElement('div');
            div.className = `result ${isSuccess ? 'success' : 'error'}`;
            div.innerHTML = `${new Date().toLocaleTimeString()}: ${message}`;
            container.appendChild(div);
            console.log(message);
        }
        
        function testValidation() {
            const container = document.getElementById('validationResults');
            container.innerHTML = '<div class="result">ğŸ”„ ê²€ì¦ ì‹¤í–‰ ì¤‘...</div>';
            
            try {
                // CONFIG í™•ì¸
                addResult('validationResults', `CONFIG ê°ì²´: ${!!window.CONFIG ? 'âœ… ì¡´ì¬' : 'âŒ ì—†ìŒ'}`, !!window.CONFIG);
                
                if (window.CONFIG) {
                    addResult('validationResults', `API í‚¤ ê°’: ${CONFIG.GOOGLE_MAPS_API_KEY}`, true);
                    addResult('validationResults', `API í‚¤ ê¸¸ì´: ${CONFIG.GOOGLE_MAPS_API_KEY.length}ì`, true);
                    addResult('validationResults', `API í‚¤ íƒ€ì…: ${typeof CONFIG.GOOGLE_MAPS_API_KEY}`, true);
                    
                    // validateConfig ì‹¤í–‰
                    const isValid = validateConfig();
                    addResult('validationResults', `validateConfig() ê²°ê³¼: ${isValid ? 'âœ… ì„±ê³µ' : 'âŒ ì‹¤íŒ¨'}`, isValid);
                    
                    if (isValid) {
                        addResult('validationResults', 'ğŸ‰ API í‚¤ ê²€ì¦ ì™„ë£Œ! Google Mapsë¥¼ ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', true);
                    }
                } else {
                    addResult('validationResults', 'âŒ CONFIG ê°ì²´ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤', false);
                }
            } catch (error) {
                addResult('validationResults', `âŒ ê²€ì¦ ì¤‘ ì˜¤ë¥˜: ${error.message}`, false);
            }
        }
        
        function loadGoogleMaps() {
            if (!validateConfig()) {
                addResult('loadResults', 'âŒ API í‚¤ ê²€ì¦ ì‹¤íŒ¨. ë¨¼ì € 1ë‹¨ê³„ë¥¼ ì™„ë£Œí•˜ì„¸ìš”.', false);
                return;
            }
            
            if (window.google && window.google.maps) {
                addResult('loadResults', 'âœ… Google Maps APIê°€ ì´ë¯¸ ë¡œë“œë˜ì–´ ìˆìŠµë‹ˆë‹¤', true);
                apiLoaded = true;
                return;
            }
            
            addResult('loadResults', 'â³ Google Maps API ë¡œë”© ì‹œì‘...', true);
            
            const script = document.createElement('script');
            script.src = `https://maps.googleapis.com/maps/api/js?key=${CONFIG.GOOGLE_MAPS_API_KEY}&libraries=places,geometry&callback=onGoogleMapsLoaded`;
            script.async = true;
            
            script.onload = () => {
                addResult('loadResults', 'âœ… Google Maps API ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ', true);
            };
            
            script.onerror = (error) => {
                addResult('loadResults', 'âŒ Google Maps API ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨', false);
                addResult('loadResults', `ì˜¤ë¥˜ ì„¸ë¶€ì‚¬í•­: ${error.message || 'Unknown error'}`, false);
            };
            
            document.head.appendChild(script);
        }
        
        // Google Maps API ë¡œë“œ ì™„ë£Œ ì½œë°±
        window.onGoogleMapsLoaded = function() {
            addResult('loadResults', 'âœ… Google Maps API ì½œë°± ì‹¤í–‰ë¨', true);
            addResult('loadResults', 'ğŸ¯ Google Maps API ë¡œë“œ ì™„ë£Œ!', true);
            apiLoaded = true;
        };
        
        function createMap() {
            if (!apiLoaded) {
                addResult('mapResults', 'âŒ Google Maps APIê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. 2ë‹¨ê³„ë¥¼ ë¨¼ì € ì™„ë£Œí•˜ì„¸ìš”.', false);
                return;
            }
            
            const container = document.getElementById('mapTest');
            container.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; height: 100%; background: #f0f0f0; color: #333;">â³ ì§€ë„ ìƒì„± ì¤‘...</div>';
            
            try {
                const map = new google.maps.Map(container, {
                    center: { lat: 37.5665, lng: 126.9780 }, // ì„œìš¸ ì¤‘ì‹¬
                    zoom: 12,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                });
                
                addResult('mapResults', 'âœ… ì§€ë„ ìƒì„± ì„±ê³µ!', true);
                
                // í…ŒìŠ¤íŠ¸ ë§ˆì»¤ ì¶”ê°€
                const marker = new google.maps.Marker({
                    position: { lat: 37.5796, lng: 126.9770 }, // ê²½ë³µê¶
                    map: map,
                    title: 'ê²½ë³µê¶ - í…ŒìŠ¤íŠ¸ ë§ˆì»¤',
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        fillColor: '#667eea',
                        fillOpacity: 0.8,
                        strokeColor: '#ffffff',
                        strokeWeight: 2,
                        scale: 15
                    }
                });
                
                addResult('mapResults', 'âœ… í…ŒìŠ¤íŠ¸ ë§ˆì»¤ ì¶”ê°€ ì™„ë£Œ', true);
                addResult('mapResults', 'ğŸ‰ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì„±ê³µ! Google Mapsê°€ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤.', true);
                
            } catch (error) {
                addResult('mapResults', `âŒ ì§€ë„ ìƒì„± ì‹¤íŒ¨: ${error.message}`, false);
                container.innerHTML = `<div style="color: red; padding: 20px; text-align: center;">ì§€ë„ ìƒì„± ì‹¤íŒ¨: ${error.message}</div>`;
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ìœ¼ë¡œ 1ë‹¨ê³„ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                testValidation();
            }, 500);
        });
    </script>
</body>
</html>